
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PLC Project (1): Library &#8212; pcdshub/lcls2-cc-lib  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Library.tmc" href="Library.tmc.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="plc-project-1-library">
<h1>PLC Project (1): Library<a class="headerlink" href="#plc-project-1-library" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Project</span> <span class="n">root</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">travis</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">pcdshub</span><span class="o">/</span><span class="n">lcls2</span><span class="o">-</span><span class="n">cc</span><span class="o">-</span><span class="n">lib</span><span class="o">/</span><span class="n">lcls2</span><span class="o">-</span><span class="n">cc</span><span class="o">-</span><span class="n">lib</span>
<span class="n">Project</span> <span class="n">path</span><span class="p">:</span> <span class="n">Library</span><span class="o">/</span><span class="n">Library</span><span class="o">.</span><span class="n">plcproj</span>
<span class="n">TMC</span> <span class="n">path</span><span class="p">:</span>     <span class="n">Library</span><span class="o">/</span><span class="n">Library</span><span class="o">.</span><span class="n">tmc</span>
<span class="n">AMS</span> <span class="n">ID</span><span class="p">:</span>       
<span class="n">IP</span> <span class="n">Address</span><span class="p">:</span>    <span class="p">(</span><span class="o">*</span> <span class="n">based</span> <span class="n">on</span> <span class="n">AMS</span> <span class="n">ID</span><span class="p">)</span>
<span class="n">Port</span><span class="p">:</span>         <span class="mi">851</span>

<span class="n">Source</span> <span class="n">files</span><span class="p">:</span>
    <span class="mf">1.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">ATM</span><span class="o">/</span><span class="n">ENUM_ATM_States</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">2.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">ATM</span><span class="o">/</span><span class="n">FB_ATM</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">3.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">ATM</span><span class="o">/</span><span class="n">FB_ATM_States</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">4.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">LIC</span><span class="o">/</span><span class="n">ENUM_LIC_States</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">5.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">LIC</span><span class="o">/</span><span class="n">FB_LIC</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">6.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">LIC</span><span class="o">/</span><span class="n">FB_LIC_States</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">7.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">ENUM_PPM_States</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">8.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">9.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_Gige</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">10.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_PowerMeter</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">11.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_States</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">12.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">REF</span><span class="o">/</span><span class="n">FB_REF</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">13.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">REF</span><span class="o">/</span><span class="n">FB_REF_Laser</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">14.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">SLITS</span><span class="o">/</span><span class="n">FB_SLITS</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">15.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">SLITS</span><span class="o">/</span><span class="n">FB_SLITS_POWER</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">16.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">WFS</span><span class="o">/</span><span class="n">ENUM_WFS_States</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">17.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">WFS</span><span class="o">/</span><span class="n">FB_WFS</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">18.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">WFS</span><span class="o">/</span><span class="n">FB_WFS_States</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">19.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">ENUM_XPIM_Filters</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">20.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">ENUM_XPIM_States</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">21.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">22.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_FilterWheel</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">23.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_LED</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">24.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_Opal</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">25.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_States</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">26.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">FB_L2SI_Flowmeter</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">27.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">FB_XTES_Flowswitch</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">28.</span><span class="p">)</span> <span class="n">Library</span><span class="o">/</span><span class="n">Version</span><span class="o">/</span><span class="n">Global_Version</span><span class="o">.</span><span class="n">TcGVL</span>

<span class="n">POUs</span><span class="p">:</span>
    <span class="mf">1.</span><span class="p">)</span> <span class="n">FB_ATM</span>
    <span class="mf">2.</span><span class="p">)</span> <span class="n">FB_ATM_States</span>
    <span class="mf">3.</span><span class="p">)</span> <span class="n">FB_L2SI_Flowmeter</span>
    <span class="mf">4.</span><span class="p">)</span> <span class="n">FB_LIC</span>
    <span class="mf">5.</span><span class="p">)</span> <span class="n">FB_LIC_States</span>
    <span class="mf">6.</span><span class="p">)</span> <span class="n">FB_PPM</span>
    <span class="mf">7.</span><span class="p">)</span> <span class="n">FB_PPM_Gige</span>
    <span class="mf">8.</span><span class="p">)</span> <span class="n">FB_PPM_PowerMeter</span>
    <span class="mf">9.</span><span class="p">)</span> <span class="n">FB_PPM_States</span>
    <span class="mf">10.</span><span class="p">)</span> <span class="n">FB_REF</span>
    <span class="mf">11.</span><span class="p">)</span> <span class="n">FB_REF_Laser</span>
    <span class="mf">12.</span><span class="p">)</span> <span class="n">FB_SLITS</span>
    <span class="mf">13.</span><span class="p">)</span> <span class="n">FB_SLITS_POWER</span>
    <span class="mf">14.</span><span class="p">)</span> <span class="n">FB_WFS</span>
    <span class="mf">15.</span><span class="p">)</span> <span class="n">FB_WFS_States</span>
    <span class="mf">16.</span><span class="p">)</span> <span class="n">FB_XPIM</span>
    <span class="mf">17.</span><span class="p">)</span> <span class="n">FB_XPIM_FilterWheel</span>
    <span class="mf">18.</span><span class="p">)</span> <span class="n">FB_XPIM_LED</span>
    <span class="mf">19.</span><span class="p">)</span> <span class="n">FB_XPIM_Opal</span>
    <span class="mf">20.</span><span class="p">)</span> <span class="n">FB_XPIM_States</span>
    <span class="mf">21.</span><span class="p">)</span> <span class="n">FB_XTES_Flowswitch</span>

<span class="n">GVLs</span><span class="p">:</span>
    <span class="mf">1.</span><span class="p">)</span> <span class="n">Global_Version</span>
</pre></div>
</div>
<div class="section" id="dut-enum-atm-states">
<h2>DUT: ENUM_ATM_States<a class="headerlink" href="#dut-enum-atm-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/ATM/ENUM_ATM_States.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
TYPE ENUM_ATM_States :
(
    Unknown := 0,
    OUT := 1,
    TARGET1 := 2,
    TARGET2 := 3,
    TARGET3 := 4,
    TARGET4 := 5,
    TARGET5 := 6
);
END_TYPE
</pre></div>
</div>
</div>
<div class="section" id="dut-enum-lic-states">
<h2>DUT: ENUM_LIC_States<a class="headerlink" href="#dut-enum-lic-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/LIC/ENUM_LIC_States.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
TYPE ENUM_LIC_States :
(
    Unknown := 0,
    OUT := 1,
    MIRROR1 := 2,
    MIRROR2 := 3,
    TARGET := 4
);
END_TYPE
</pre></div>
</div>
</div>
<div class="section" id="dut-enum-ppm-states">
<h2>DUT: ENUM_PPM_States<a class="headerlink" href="#dut-enum-ppm-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/PPM/ENUM_PPM_States.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
TYPE ENUM_PPM_States :
(
    Unknown := 0,
    OUT := 1,
    POWERMETER := 2,
    YAG1 := 3,
    YAG2 := 4
);
END_TYPE
</pre></div>
</div>
</div>
<div class="section" id="dut-enum-wfs-states">
<h2>DUT: ENUM_WFS_States<a class="headerlink" href="#dut-enum-wfs-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/WFS/ENUM_WFS_States.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
TYPE ENUM_WFS_States :
(
    Unknown := 0,
    OUT := 1,
    TARGET1 := 2,
    TARGET2 := 3,
    TARGET3 := 4,
    TARGET4 := 5,
    TARGET5 := 6
);
END_TYPE
</pre></div>
</div>
</div>
<div class="section" id="dut-enum-xpim-filters">
<h2>DUT: ENUM_XPIM_Filters<a class="headerlink" href="#dut-enum-xpim-filters" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/XPIM/ENUM_XPIM_Filters.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
TYPE ENUM_XPIM_Filters :
(
    Unknown := 0,
    T50 := 1,
    T25 := 2,
    T10 := 3,
    T5 := 4,
    T1 := 5,
    T100 := 6
);
END_TYPE
</pre></div>
</div>
</div>
<div class="section" id="dut-enum-xpim-states">
<h2>DUT: ENUM_XPIM_States<a class="headerlink" href="#dut-enum-xpim-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/XPIM/ENUM_XPIM_States.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
TYPE ENUM_XPIM_States :
(
    Unknown := 0,
    OUT := 1,
    YAG := 2,
    DIAMOND := 3,
    RETICLE := 4
);
END_TYPE
</pre></div>
</div>
</div>
<div class="section" id="gvl-global-version">
<h2>GVL: Global_Version<a class="headerlink" href="#gvl-global-version" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Version/Global_Version.TcGVL</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;TcGenerated&#39;}
{attribute &#39;no-analysis&#39;}
// This function has been automatically generated from the project information.
VAR_GLOBAL CONSTANT
    {attribute &#39;const_non_replaced&#39;}
    {attribute &#39;linkalways&#39;}
    stLibVersion_lcls2_cc_lib : ST_LibVersion := (iMajor := 0, iMinor := 0, iBuild := 0, iRevision := 0, sVersion := &#39;0.0.0&#39;);
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-atm">
<h2>POU: FB_ATM<a class="headerlink" href="#pou-fb-atm" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/ATM/FB_ATM.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_ATM
VAR_IN_OUT
    stYStage: DUT_MotionStage;
    stXStage: DUT_MotionStage;
    fbArbiter: FB_Arbiter;
    fbFFHWO: FB_HardwareFFOutput;
END_VAR
VAR_INPUT
    stOut: DUT_PositionState;
    stTarget1: DUT_PositionState;
    stTarget2: DUT_PositionState;
    stTarget3: DUT_PositionState;
    stTarget4: DUT_PositionState;
    stTarget5: DUT_PositionState;
    nTransitionAssertionID: UDINT;
    nUnknownAssertionID: UDINT;
END_VAR
VAR
    fbYStage: FB_MotionStage;
    fbXStage: FB_MotionStage;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MMS:STATE
        io: i
    &#39;}
    fbStates: FB_ATM_States;

    {attribute &#39;pytmc&#39; := &#39;
        pv: STC:01
        io: input
    &#39;}
    fbThermoCouple1: FB_TempSensor;
END_VAR
fbYStage(stMotionStage:=stYStage);
stYStage.bHardwareEnable := TRUE;
stYStage.bPowerSelf := FALSE;
stYStage.nEnableMode := ENUM_StageEnableMode.DURING_MOTION;

fbXStage(stMotionStage:=stXStage);
stXStage.bLimitForwardEnable := TRUE;
stXStage.bLimitBackwardEnable := TRUE;
stXStage.bHardwareEnable := TRUE;
stXStage.bPowerSelf := TRUE;
stXStage.nEnableMode := ENUM_StageEnableMode.DURING_MOTION;

fbStates(
    fbArbiter:=fbArbiter,
    fbFFHWO:=fbFFHWO,
    nTransitionAssertionID:=nTransitionAssertionID,
    nUnknownAssertionID:=nUnknownAssertionID,
    stMotionStage:=stYStage,
    bEnable := TRUE,
    stOut:=stOut,
    stTarget1:=stTarget1,
    stTarget2:=stTarget2,
    stTarget3:=stTarget3,
    stTarget4:=stTarget4,
    stTarget5:=stTarget5);

fbThermoCouple1();

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-atm-states">
<h2>POU: FB_ATM_States<a class="headerlink" href="#pou-fb-atm-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/ATM/FB_ATM_States.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_ATM_States EXTENDS FB_PositionStateBase_WithPMPS
VAR_INPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: SET
        io: io
    &#39;}
    enumSet: ENUM_ATM_states;

    stOut: DUT_PositionState;
    stTarget1: DUT_PositionState;
    stTarget2: DUT_PositionState;
    stTarget3: DUT_PositionState;
    stTarget4: DUT_PositionState;
    stTarget5: DUT_PositionState;

    bStatesLock: BOOL;
END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: GET
        io: i
    &#39;}
    enumGet: ENUM_ATM_States;
END_VAR
VAR
    bATMInit: BOOL;
END_VAR
VAR CONSTANT
    fInDelta: LREAL := 2;
    fOutDelta: LREAL := 2;
    fInVelocity: LREAL := 5;
    fOutVelocity: LREAL := 5;
    fAccel: LREAL := 200;
    fOutDecel: LREAL := 25;
END_VAR
IF NOT bATMInit THEN
    bATMInit := TRUE;

    stOut.sName := &#39;OUT&#39;;
    stOut.fVelocity := fOutVelocity;
    stOut.fDelta := fOutDelta;
    stOut.fAccel := fAccel;
    stOut.fDecel := fOutDecel;
    stOut.bMoveOk := TRUE;

    stTarget1.sName := &#39;TARGET1&#39;;
    stTarget1.fVelocity := fInVelocity;
    stTarget1.fDelta := fInDelta;
    stTarget1.fAccel := fAccel;
    stTarget1.fDecel := fAccel;
    stTarget1.bMoveOk := TRUE;

    stTarget2.sName := &#39;TARGET2&#39;;
    stTarget2.fVelocity := fInVelocity;
    stTarget2.fDelta := fInDelta;
    stTarget2.fAccel := fAccel;
    stTarget2.fDecel := fAccel;
    stTarget2.bMoveOk := TRUE;

    stTarget3.sName := &#39;TARGET3&#39;;
    stTarget3.fVelocity := fInVelocity;
    stTarget3.fDelta := fInDelta;
    stTarget3.fAccel := fAccel;
    stTarget3.fDecel := fAccel;
    stTarget3.bMoveOk := TRUE;

    stTarget4.sName := &#39;TARGET4&#39;;
    stTarget4.fVelocity := fInVelocity;
    stTarget4.fDelta := fInDelta;
    stTarget4.fAccel := fAccel;
    stTarget4.fDecel := fAccel;
    stTarget4.bMoveOk := TRUE;

    stTarget5.sName := &#39;TARGET5&#39;;
    stTarget5.fVelocity := fInVelocity;
    stTarget5.fDelta := fInDelta;
    stTarget5.fAccel := fAccel;
    stTarget5.fDecel := fAccel;
    stTarget5.bMoveOk := TRUE;

    arrStates[1] := stOut;
    arrStates[2] := stTarget1;
    arrStates[3] := stTarget2;
    arrStates[4] := stTarget3;
    arrStates[5] := stTarget4;
    arrStates[6] := stTarget5;
END_IF

setState := enumSet;
Exec();
enumGet := getState;
enumSet := setState;

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-l2si-flowmeter">
<h2>POU: FB_L2SI_Flowmeter<a class="headerlink" href="#pou-fb-l2si-flowmeter" title="Permalink to this headline">¶</a></h2>
<p>File: Library/POUs/FB_L2SI_Flowmeter.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_L2SI_Flowmeter
VAR
    {attribute &#39;pytmc&#39; := &#39;
        pv: MA
        io: input
    &#39;}
    fRaw AT %I*: INT;

    {attribute &#39;pytmc&#39; := &#39;
        pv: FLOW
        io: input
    &#39;}
    fFlowRate: LREAL;
END_VAR


END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-lic">
<h2>POU: FB_LIC<a class="headerlink" href="#pou-fb-lic" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/LIC/FB_LIC.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_LIC
VAR_IN_OUT
    stYStage: DUT_MotionStage;
    fbArbiter: FB_Arbiter;
    fbFFHWO: FB_HardwareFFOutput;
END_VAR
VAR_INPUT
    stOut: DUT_PositionState;
    stMirror1: DUT_PositionState;
    stMirror2: DUT_PositionState;
    stTarget1: DUT_PositionState;
    nTransitionAssertionID: UDINT;
    nUnknownAssertionID: UDINT;
END_VAR
VAR
    fbYStage: FB_MotionStage;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MMS:STATE
        io: i
    &#39;}
    fbStates: FB_LIC_States;
END_VAR
fbYStage(stMotionStage:=stYStage);
stYStage.bHardwareEnable := TRUE;
stYStage.bPowerSelf := FALSE;
stYStage.nEnableMode := ENUM_StageEnableMode.DURING_MOTION;

fbStates(
    fbArbiter:=fbArbiter,
    fbFFHWO:=fbFFHWO,
    nTransitionAssertionID:=nTransitionAssertionID,
    nUnknownAssertionID:=nUnknownAssertionID,
    stMotionStage:=stYStage,
    bEnable := TRUE,
    stOut:=stOut,
    stMirror1:=stMirror1,
    stMirror2:=stMirror2,
    stTarget1:=stTarget1);

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-lic-states">
<h2>POU: FB_LIC_States<a class="headerlink" href="#pou-fb-lic-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/LIC/FB_LIC_States.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_LIC_States EXTENDS FB_PositionStateBase_WithPMPS
VAR_INPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: SET
        io: io
    &#39;}
    enumSet: ENUM_LIC_states;

    stOut: DUT_PositionState;
    stMirror1: DUT_PositionState;
    stMirror2: DUT_PositionState;
    stTarget1: DUT_PositionState;

    bStatesLock: BOOL;
END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: GET
        io: i
    &#39;}
    enumGet: ENUM_LIC_States;
END_VAR
VAR
    bLICInit: BOOL;
END_VAR
VAR CONSTANT
    fInDelta: LREAL := 2;
    fOutDelta: LREAL := 2;
    fInVelocity: LREAL := 5;
    fOutVelocity: LREAL := 5;
    fAccel: LREAL := 200;
    fOutDecel: LREAL := 25;
END_VAR
IF NOT bLICInit THEN
    bLICInit := TRUE;

    stOut.sName := &#39;OUT&#39;;
    stOut.fVelocity := fOutVelocity;
    stOut.fDelta := fOutDelta;
    stOut.fAccel := fAccel;
    stOut.fDecel := fOutDecel;
    stOut.bMoveOk := TRUE;

    stMirror1.sName := &#39;MIRROR1&#39;;
    stMirror1.fVelocity := fInVelocity;
    stMirror1.fDelta := fInDelta;
    stMirror1.fAccel := fAccel;
    stMirror1.fDecel := fAccel;
    stMirror1.bMoveOk := TRUE;

    stMirror2.sName := &#39;MIRROR2&#39;;
    stMirror2.fVelocity := fInVelocity;
    stMirror2.fDelta := fInDelta;
    stMirror2.fAccel := fAccel;
    stMirror2.fDecel := fAccel;
    stMirror2.bMoveOk := TRUE;

    stTarget1.sName := &#39;TARGET&#39;;
    stTarget1.fVelocity := fInVelocity;
    stTarget1.fDelta := fInDelta;
    stTarget1.fAccel := fAccel;
    stTarget1.fDecel := fAccel;
    stTarget1.bMoveOk := TRUE;

    arrStates[1] := stOut;
    arrStates[2] := stMirror1;
    arrStates[3] := stMirror2;
    arrStates[4] := stTarget1;
END_IF

setState := enumSet;
Exec();
enumGet := getState;
enumSet := setState;

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-ppm">
<h2>POU: FB_PPM<a class="headerlink" href="#pou-fb-ppm" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/PPM/FB_PPM.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PPM
VAR_IN_OUT
    stYStage: DUT_MotionStage;
    fbArbiter: FB_Arbiter;
    fbFFHWO: FB_HardwareFFOutput;
END_VAR
VAR_INPUT
    stOut: DUT_PositionState;
    stPower: DUT_PositionState;
    stYag1: DUT_PositionState;
    stYag2: DUT_PositionState;
    nTransitionAssertionID: UDINT;
    nUnknownAssertionID: UDINT;
END_VAR
VAR
    fbYStage: FB_MotionStage;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MMS:STATE
        io: i
    &#39;}
    fbStates: FB_PPM_States;

    {attribute &#39;pytmc&#39; := &#39;
        pv: SPM
    &#39;}
    fbPowerMeter: FB_PPM_PowerMeter;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CAM
    &#39;}
    fbGige: FB_PPM_Gige;

    {attribute &#39;pytmc&#39; :=&#39;
        pv: SFM
    &#39;}
    fbFlowMeter: FB_L2SI_Flowmeter;

    {attribute &#39;pytmc&#39; := &#39;
        pv: YAG
        io: input
    &#39;}
    fbYagThermoCouple: FB_ThermoCouple;
END_VAR
fbYStage(stMotionStage:=stYStage);
stYStage.bHardwareEnable := TRUE;
stYStage.bPowerSelf := FALSE;
stYStage.nEnableMode := ENUM_StageEnableMode.DURING_MOTION;

fbStates(
    fbArbiter:=fbArbiter,
    fbFFHWO:=fbFFHWO,
    nTransitionAssertionID:=nTransitionAssertionID,
    nUnknownAssertionID:=nUnknownAssertionID,
    stMotionStage:=stYStage,
    bEnable:=TRUE,
    stOut:=stOut,
    stPower:=stPower,
    stYag1:=stYag1,
    stYag2:=stYag2);

fbPowerMeter();
fbGige();
fbFlowMeter();
fbYagThermoCouple();

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-ppm-gige">
<h2>POU: FB_PPM_Gige<a class="headerlink" href="#pou-fb-ppm-gige" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/PPM/FB_PPM_Gige.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PPM_Gige
VAR
    iIlluminatorINT AT %Q*: INT;

    {attribute &#39;pytmc&#39; := &#39;
        pv: PWR
        field: ZNAM OFF
        field: ONAM ON
    &#39;}
    bGigePower AT %Q*: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CIL:PCT
        EGU: %
    &#39;}
    fIlluminatorPercent: LREAL;

    fbGetIllPercent: FB_AnalogInput;
    fbSetIllPercent: FB_AnalogOutput;

    bGigeInit: BOOL := FALSE;
END_VAR
// Turn the GigE on by default
IF NOT bGigeInit THEN
    bGigePower := TRUE;
    bGigeInit := TRUE;
END_IF

// Illuminator conversion to percentage
fbSetIllPercent(
    fReal:=fIlluminatorPercent,
    fSafeMax:=100,
    fSafeMin:=0,
    iTermBits:=15,
    fTermMax:=100,
    fTermMin:=0,
    iRaw=&gt;iIlluminatorINT);
fbGetIllPercent(
    iRaw:=iIlluminatorINT,
    iTermBits:=15,
    fTermMax:=100,
    fTermMin:=0,
    fReal=&gt;fIlluminatorPercent);

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-ppm-powermeter">
<h2>POU: FB_PPM_PowerMeter<a class="headerlink" href="#pou-fb-ppm-powermeter" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/PPM/FB_PPM_PowerMeter.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PPM_PowerMeter
VAR
    iVoltageINT AT %I*: INT;

    {attribute &#39;pytmc&#39; := &#39;
        pv: VOLT
        io: input
        field: EGU mV
    &#39;}
    fVoltage: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: VOLT_BUFFER
        io: input
        field: EGU mV
    &#39;}
    fVoltageBuffer: ARRAY[1..1000] OF LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB
        io: input
    &#39;}
    fCalibBase: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB_BUFFER
        io: input
    &#39;}
    fCalibBaseBuffer: ARRAY[1..1000] OF LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MJ
        io: input
        field: EGU mJ
    &#39;}
    fCalibMJ: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MJ_BUFFER
        io: input
        field: EGU mJ
    &#39;}
    fCalibMJBuffer: ARRAY[1..1000] OF LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv:
        io: input
    &#39;}
    fbThermoCouple: FB_ThermoCouple;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB:OFFSET
        io: io
    &#39;}
    fCalibRelOffset: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB:RATIO
        io: io
    &#39;}
    fCalibRelRatio: LREAL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CALIB:MJ_RATIO
        io: io
    &#39;}
    fCalibMJRatio: LREAL;

    fbGetPMVoltage: FB_AnalogInput;
    fbVoltageBuffer: FB_LREALBuffer;
    fbCalibBaseBuffer: FB_LREALBuffer;
    fbCalibMJBuffer: FB_LREALBuffer;
END_VAR
fbThermoCouple();

// Convert the terminal&#39;s integer into a value in millivolts
fbGetPMVoltage(
    iRaw := iVoltageINT,
    iTermBits := 15,
    fTermMax := 10000,
    fTermMin := 0,
    fReal =&gt; fVoltage);

// Power meter calibration
fCalibBase := (fVoltage + fCalibRelOffset) * fCalibRelRatio;
fCalibMJ := fCalibBase * fCalibMJRatio;

// Buffer the full-rate Voltage and calibrated MJ values
fbVoltageBuffer(
    bExecute := TRUE,
    fInput := fVoltage,
    arrOutput =&gt; fVoltageBuffer);
fbCalibBaseBuffer(
    bExecute := TRUE,
    fInput := fCalibBase,
    arrOutput =&gt; fCalibBaseBuffer);
fbCalibMJBuffer(
    bExecute := TRUE,
    fInput := fCalibMJ,
    arrOutput =&gt; fCalibMJBuffer);

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-ppm-states">
<h2>POU: FB_PPM_States<a class="headerlink" href="#pou-fb-ppm-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/PPM/FB_PPM_States.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PPM_States EXTENDS FB_PositionStateBase_WithPMPS
VAR_INPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: SET
        io: io
    &#39;}
    enumSet: ENUM_PPM_states;

    stOut: DUT_PositionState;
    stPower: DUT_PositionState;
    stYag1: DUT_PositionState;
    stYag2: DUT_PositionState;

    bStatesLock: BOOL;
END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: GET
        io: i
    &#39;}
    enumGet: ENUM_PPM_States;
END_VAR
VAR
    bPPMInit: BOOL;
END_VAR
VAR CONSTANT
    fInDelta: LREAL := 2;
    fOutDelta: LREAL := 2;
    fInVelocity: LREAL := 5;
    fOutVelocity: LREAL := 5;
    fAccel: LREAL := 200;
    fOutDecel: LREAL := 25;
END_VAR
IF NOT bPPMInit THEN
    bPPMInit := TRUE;

    stOut.sName := &#39;OUT&#39;;
    stOut.fVelocity := fOutVelocity;
    stOut.fDelta := fOutDelta;
    stOut.fAccel := fAccel;
    stOut.fDecel := fOutDecel;
    stOut.bMoveOk := TRUE;

    stPower.sName := &#39;POWERMETER&#39;;
    stPower.fVelocity := fInVelocity;
    stPower.fDelta := fInDelta;
    stPower.fAccel := fAccel;
    stPower.fDecel := fAccel;
    stPower.bMoveOk := TRUE;

    stYag1.sName := &#39;YAG1&#39;;
    stYag1.fVelocity := fInVelocity;
    stYag1.fDelta := fInDelta;
    stYag1.fAccel := fAccel;
    stYag1.fDecel := fAccel;
    stYag1.bMoveOk := TRUE;

    stYag2.sName := &#39;YAG2&#39;;
    stYag2.fVelocity := fInVelocity;
    stYag2.fDelta := fInDelta;
    stYag2.fAccel := fAccel;
    stYag2.fDecel := fAccel;
    stYag2.bMoveOk := TRUE;

    arrStates[1] := stOut;
    arrStates[2] := stPower;
    arrStates[3] := stYag1;
    arrStates[4] := stYag2;
END_IF

setState := enumSet;
Exec();
enumGet := getState;
enumSet := setState;

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-ref">
<h2>POU: FB_REF<a class="headerlink" href="#pou-fb-ref" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/REF/FB_REF.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_REF
VAR_IN_OUT
    stYStage: DUT_MotionStage;
    fbArbiter: FB_Arbiter;
    fbFFHWO: FB_HardwareFFOutput;
END_VAR
VAR_INPUT
    stIn: DUT_PositionState;
    stOut: DUT_PositionState;
    nTransitionAssertionID: UDINT;
    nUnknownAssertionID: UDINT;
END_VAR
VAR
    fbYStage: FB_MotionStage;
    {attribute &#39;pytmc&#39; := &#39;
        pv: MMS:STATE
        io: io
    &#39;}
    fbStates: FB_PositionStateInOut_WithPMPS;

    {attribute &#39;pytmc&#39; := &#39;
        pv: LAS
        io: io
    &#39;}
    fbLaser: FB_REF_Laser;

    bInit: BOOL;
END_VAR
VAR CONSTANT
    bStatesLock: BOOL := FALSE;
    fVelo: LREAL := 10;
    fAccel: LREAL := 10;
    fDelta: LREAL := 2;
END_VAR
IF NOT bInit THEN
    bInit := TRUE;

    stOut.fDelta := fDelta;
    stOut.fVelocity := fVelo;
    stOut.fAccel := fAccel;
    stOut.fDecel := fAccel;
    stOut.bLocked := bStatesLock;
    stOut.bMoveOk := TRUE;

    stIn.fDelta := fDelta;
    stIn.fVelocity := fVelo;
    stIn.fAccel := fAccel;
    stIn.fDecel := fAccel;
    stIn.bLocked := bStatesLock;
    stIn.bMoveOk := TRUE;
END_IF

fbYStage(stMotionStage:=stYStage);
stYStage.bHardwareEnable := TRUE;
stYStage.bPowerSelf := FALSE;
stYStage.nEnableMode := ENUM_StageEnableMode.DURING_MOTION;

fbStates(
    fbArbiter:=fbArbiter,
    fbFFHWO:=fbFFHWO,
    nTransitionAssertionID:=nTransitionAssertionID,
    nUnknownAssertionID:=nUnknownAssertionID,
    stMotionStage:=stYStage,
    bEnable:=TRUE,
    stOut := stOut,
    stIn := stIn);

fbLaser();

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-ref-laser">
<h2>POU: FB_REF_Laser<a class="headerlink" href="#pou-fb-ref-laser" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/REF/FB_REF_Laser.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_REF_Laser
VAR_INPUT
    bShutdown: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: PCT
        io: io
    &#39;}
    fLaserPercent: LREAL;
END_VAR
VAR
    iShutdownINT AT %Q*: INT;
    iLaserINT AT %Q*: INT;

    fbGetLasPercent: FB_AnalogInput;
    fbSetLasPercent: FB_AnalogOutput;
END_VAR
// Send 5V to suppress laser
IF bShutdown THEN
    iShutdownINT := LREAL_TO_INT(EXPT(2, 14));
ELSE
    iShutdownINT := 0;
END_IF

// Limit to 0-5V instead of 10V
fbSetLasPercent(
    fReal:=fLaserPercent,
    fSafeMax:=100,
    fSafeMin:=0,
    iTermBits:=15,
    fTermMax:=200,
    fTermMin:=0,
    iRaw=&gt;iLaserInt);
fbGetLasPercent(
    iRaw:=iLaserInt,
    iTermBits:=15,
    fTermMax:=200,
    fTermMin:=0,
    fReal=&gt;fLaserPercent);

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-slits">
<h2>POU: FB_SLITS<a class="headerlink" href="#pou-fb-slits" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/SLITS/FB_SLITS.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="n">FUNCTION_BLOCK</span> <span class="n">FB_SLITS</span>


<span class="n">END_FUNCTION_BLOCK</span>
<span class="n">ACTION</span> <span class="n">ACT_BLOCK</span><span class="o">:</span>

<span class="n">END_ACTION</span>
<span class="n">ACTION</span> <span class="n">ACT_CalculatePositions</span><span class="o">:</span>

<span class="n">END_ACTION</span>
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-slits-power">
<h2>POU: FB_SLITS_POWER<a class="headerlink" href="#pou-fb-slits-power" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/SLITS/FB_SLITS_POWER.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_SLITS_POWER EXTENDS FB_SLITS
VAR_IN_OUT
    stTopBlade: DUT_MotionStage;
    stBottomBlade: DUT_MotionStage;
    stNorthBlade: DUT_MotionStage;
    stSouthBlade: DUT_MotionStage;
END_VAR
VAR_INPUT
    {attribute &#39;pytmc&#39; := &#39;
    pv: GO;
    io: io;
    field: ZNAM False
    field: ONAM True
    &#39;}
    bExecuteMotion:BOOL ;
    {attribute &#39;pytmc&#39; := &#39;
    pv: PMPS_OK;
    io: i;
    field: ZNAM False
    field: ONAM True
    &#39;}
    bMoveOk:BOOL;
END_VAR
VAR_OUTPUT
END_VAR
VAR
    fbTopBlade: FB_MotionStage;
    fbBottomBlade: FB_MotionStage;
    fbNorthBlade: FB_MotionStage;
    fbSouthBlade: FB_MotionStage;
    fPosTopBlade: LREAL;
    fPosBottomBlade: LREAL;
    fPosNorthBlade: LREAL;
    fPosSouthBlade: LREAL;

    (*Motion Parameters*)
    fSmallDelta: LREAL := 0.01;
    fBigDelta: LREAL := 10;
    fMaxVelocity: LREAL := 0.2;
    fHighAccel: LREAL := 0.8;
    fLowAccel: LREAL := 0.1;

    stTop: DUT_PositionState;
    stBOTTOM: DUT_PositionState;
    stNorth: DUT_PositionState;
    stSouth: DUT_PositionState;

    {attribute &#39;pytmc&#39; := &#39;pv: TOP&#39;}
    fbTop: FB_StatePTPMove;
    {attribute &#39;pytmc&#39; := &#39;pv: BOTTOM&#39;}
    fbBottom: FB_StatePTPMove;
    {attribute &#39;pytmc&#39; := &#39;pv: NORTH&#39;}
    fbNorth: FB_StatePTPMove;
    {attribute &#39;pytmc&#39; := &#39;pv: SOUTH&#39;}
    fbSouth: FB_StatePTPMove;

    (*EPICS pvs*)
    {attribute &#39;pytmc&#39; := &#39;
    pv: XWID_REQ;
    io: io;
    &#39;}
    rReqApertureSizeX : REAL;
    {attribute &#39;pytmc&#39; := &#39;
    pv: YWID_REQ;
    io: io;
    &#39;}
    rReqApertureSizeY : REAL;
    {attribute &#39;pytmc&#39; := &#39;
    pv: XCEN_REQ;
    io: io;
    &#39;}
    rReqCenterX: REAL;
    {attribute &#39;pytmc&#39; := &#39;
    pv: YCEN_REQ;
    io: io;
    &#39;}
    rReqCenterY: REAL;

    {attribute &#39;pytmc&#39; := &#39;
    pv: ACTUAL_XWIDTH;
    io: io;
    &#39;}
    rActApertureSizeX : REAL;

    {attribute &#39;pytmc&#39; := &#39;
    pv: ACTUAL_YWIDTH;
    io: io;
    &#39;}
    rActApertureSizeY : REAL;
    {attribute &#39;pytmc&#39; := &#39;
    pv: ACTUAL_XCENTER;
    io: io;
    &#39;}
    rActCenterX: REAL;
    {attribute &#39;pytmc&#39; := &#39;
    pv: ACTUAL_YCENTER;
    io: io;
    &#39;}
    rActCenterY: REAL;

    {attribute &#39;pytmc&#39; := &#39;
    pv: XCEN_SETZERO;
    io: io;
    &#39;}
    rSetCenterX: REAL;
    {attribute &#39;pytmc&#39; := &#39;
    pv: YCEN_SETZERO;
    io: io;
    &#39;}
    rSetCenterY: REAL;


    {attribute &#39;pytmc&#39; := &#39;
    pv: OPEN;
    io: io;
    field: ZNAM False
    field: ONAM True
    &#39;}
    bOpen: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
    pv: CLOSE;
    io: io;
    field: ZNAM False
    field: ONAM True
    &#39;}
    bClose: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
    pv: BLOCK;
    io: io;
    field: ZNAM False
    field: ONAM True
    &#39;}
    bBlock: BOOL;


    {attribute &#39;pytmc&#39; := &#39;
        pv: FSW
    &#39;}
    fbFlowSwitch: FB_XTES_Flowswitch;


    //RTDs
    {attribute &#39;pytmc&#39; := &#39;
        pv: TOP:RTD:01
    &#39;}
    RTD_TOP_1: FB_TempSensor;
    {attribute &#39;pytmc&#39; := &#39;
        pv: TOP:RTD:02
    &#39;}
    RTD_TOP_2: FB_TempSensor;
    {attribute &#39;pytmc&#39; := &#39;
        pv: BOTTOM:RTD:01
    &#39;}
    RTD_Bottom_1: FB_TempSensor;
    {attribute &#39;pytmc&#39; := &#39;
        pv: BOTTOM:RTD:02
    &#39;}
    RTD_Bottom_2: FB_TempSensor;

    {attribute &#39;pytmc&#39; := &#39;
        pv: NORTH:RTD:01
    &#39;}
    RTD_North_1: FB_TempSensor;
    {attribute &#39;pytmc&#39; := &#39;
        pv: NORTH:RTD:02
    &#39;}
    RTD_North_2: FB_TempSensor;
    {attribute &#39;pytmc&#39; := &#39;
        pv: SOUTH:RTD:01
    &#39;}
    RTD_South_1: FB_TempSensor;
    {attribute &#39;pytmc&#39; := &#39;
        pv: SOUTH:RTD:02
    &#39;}
    RTD_South_2: FB_TempSensor;

        //Local variables
    bInit: BOOL :=true;
    rTrig_Block: R_TRIG;
    rTrig_Open: R_TRIG;
    rTrig_Close: R_TRIG;

    fPosBlock: LREAL;
    fPosClose: LREAL;
    fPosOpen: LREAL;


END_VAR
//  init the motion stages parameters
IF ( bInit) THEN
    stTopBlade.bHardwareEnable := TRUE;
    stBottomBlade.bHardwareEnable := TRUE;
    stNorthBlade.bHardwareEnable := TRUE;
    stSouthBlade.bHardwareEnable := TRUE;
    stTopBlade.bPowerSelf :=TRUE;
    stBottomBlade.bPowerSelf :=TRUE;
    stNorthBlade.bPowerSelf :=TRUE;
    stSouthBlade.bPowerSelf :=TRUE;
    stTopBlade.nBrakeMode := ENUM_StageBrakeMode.NO_BRAKE;
    stBottomBlade.nBrakeMode := ENUM_StageBrakeMode.NO_BRAKE;
    stNorthBlade.nBrakeMode := ENUM_StageBrakeMode.NO_BRAKE;
    stSouthBlade.nBrakeMode := ENUM_StageBrakeMode.NO_BRAKE;
END_IF


// Instantiate Function block for all the blades
fbTopBlade(stMotionStage:=stTopBlade);
fbBottomBlade(stMotionStage:=stBottomBlade);
fbNorthBlade(stMotionStage:=stNorthBlade);
fbSouthBlade(stMotionStage:=stSouthBlade);

//SET and GET the requested and Actual values
ACT_CalculatePositions();
//ACT_BLOCK();

// PTP Motion for each blade
stTop.sName := &#39;Top&#39;;
stTop.fPosition := fPosTopBlade;
stTop.fDelta := fSmallDelta;
stTop.fVelocity := fMaxVelocity;
stTop.fAccel := fHighAccel;
stTop.fDecel := fHighAccel;

stBOTTOM.sName := &#39;Bottom&#39;;
stBOTTOM.fPosition := fPosBottomBlade;
stBOTTOM.fDelta := fSmallDelta;
stBOTTOM.fVelocity := fMaxVelocity;
stBOTTOM.fAccel := fHighAccel;
stBOTTOM.fDecel := fHighAccel;

stNorth.sName := &#39;North&#39;;
stNorth.fPosition := fPosNorthBlade;
stNorth.fDelta := fSmallDelta;
stNorth.fVelocity := fMaxVelocity;
stNorth.fAccel := fHighAccel;
stNorth.fDecel := fHighAccel;

stSouth.sName := &#39;South&#39;;
stSouth.fPosition := fPosSouthBlade;
stSouth.fDelta := fSmallDelta;
stSouth.fVelocity := fMaxVelocity;
stSouth.fAccel := fHighAccel;
stSouth.fDecel := fHighAccel;

fbTop.bExecute := fbBottom.bExecute :=fbNorth.bExecute := fbSouth.bExecute := bExecuteMotion;

fbTop(
    stPositionState:=stTop,
    bMoveOk:=bMoveOk,
    stMotionStage:=stTopBlade);

fbBottom(
    stPositionState:=stBOTTOM,
    bMoveOk:=bMoveOk,
    stMotionStage:=stBottomBlade);

fbNorth(
    stPositionState:=stNorth,
    bMoveOk:=bMoveOk,
    stMotionStage:=stNorthBlade);

fbSouth(
    stPositionState:=stSouth,
    bMoveOk:=bMoveOk,
    stMotionStage:=stSouthBlade);


////RTDs
RTD_TOP_1();
RTD_TOP_2();
RTD_Bottom_1();
RTD_Bottom_2();
RTD_North_1();
RTD_North_2();
RTD_South_1();
RTD_South_2();

//Flow Switch
fbFlowSwitch();

END_FUNCTION_BLOCK
ACTION ACT_BLOCK:
rTrig_Block (CLK:= bBlock);
rTrig_Open (CLK:= bOpen);
rTrig_Close (CLK:= bClose);

if (rTrig_Block.Q) THEN
    //BLOCK

    bBlock := false;
END_IF

if (rTrig_Open.Q) THEN


    bOpen := false;
END_IF

if (rTrig_Close.Q) THEN


    bClose := false;
END_IF
END_ACTION
ACTION ACT_CalculatePositions:
//Calculate requested Positions


fPosTopBlade := (rReqApertureSizeY/2) + rReqCenterY;
fPosBottomBlade := (-1*rReqApertureSizeY/2) + rReqCenterY;

fPosNorthBlade := (rReqApertureSizeX/2) + rReqCenterX;
fPosSouthBlade := (-1*rReqApertureSizeX/2) + rReqCenterX;


//Calculate Actual Positions


rActApertureSizeX := ABS(stNorthBlade.stAxisStatus.fActPosition - stSouthBlade.stAxisStatus.fActPosition);

rActApertureSizeY := ABS(stTopBlade.stAxisStatus.fActPosition - stBottomBlade.stAxisStatus.fActPosition);

rActCenterX := ((stNorthBlade.stAxisStatus.fActPosition + stSouthBlade.stAxisStatus.fActPosition)/2);

rActCenterY := ((stTopBlade.stAxisStatus.fActPosition + stBottomBlade.stAxisStatus.fActPosition)/2);



//ZERO BIAS

// Set Y center to zero

// Set X center to zero
END_ACTION
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-wfs">
<h2>POU: FB_WFS<a class="headerlink" href="#pou-fb-wfs" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/WFS/FB_WFS.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_WFS
VAR_IN_OUT
    stYStage: DUT_MotionStage;
    stZStage: DUT_MotionStage;
    fbArbiter: FB_Arbiter;
    fbFFHWO: FB_HardwareFFOutput;
END_VAR
VAR_INPUT
    stOut: DUT_PositionState;
    stTarget1: DUT_PositionState;
    stTarget2: DUT_PositionState;
    stTarget3: DUT_PositionState;
    stTarget4: DUT_PositionState;
    stTarget5: DUT_PositionState;
    nTransitionAssertionID: UDINT;
    nUnknownAssertionID: UDINT;
END_VAR
VAR
    fbYStage: FB_MotionStage;
    fbZStage: FB_MotionStage;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MMS:STATE
        io: i
    &#39;}
    fbStates: FB_WFS_States;

    {attribute &#39;pytmc&#39; := &#39;
        pv: STC:01
        io: input
    &#39;}
    fbThermoCouple1: FB_TempSensor;

    {attribute &#39;pytmc&#39; := &#39;
        pv: STC:02
        io: input
    &#39;}
    fbThermoCouple2: FB_TempSensor;
END_VAR
fbYStage(stMotionStage:=stYStage);
stYStage.bHardwareEnable := TRUE;
stYStage.bPowerSelf := FALSE;
stYStage.nEnableMode := ENUM_StageEnableMode.DURING_MOTION;

fbZStage(stMotionStage:=stZStage);
stZStage.bLimitForwardEnable := TRUE;
stZStage.bLimitBackwardEnable := TRUE;
stZStage.bHardwareEnable := TRUE;
stZStage.bPowerSelf := TRUE;
stZStage.nEnableMode := ENUM_StageEnableMode.DURING_MOTION;

fbStates(
    fbArbiter:=fbArbiter,
    fbFFHWO:=fbFFHWO,
    nTransitionAssertionID:=nTransitionAssertionID,
    nUnknownAssertionID:=nUnknownAssertionID,
    stMotionStage:=stYStage,
    bEnable := TRUE,
    stOut:=stOut,
    stTarget1:=stTarget1,
    stTarget2:=stTarget2,
    stTarget3:=stTarget3,
    stTarget4:=stTarget4,
    stTarget5:=stTarget5);

fbThermoCouple1();
fbThermoCouple2();

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-wfs-states">
<h2>POU: FB_WFS_States<a class="headerlink" href="#pou-fb-wfs-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/WFS/FB_WFS_States.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_WFS_States EXTENDS FB_PositionStateBase_WithPMPS
VAR_INPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: SET
        io: io
    &#39;}
    enumSet: ENUM_WFS_states;

    stOut: DUT_PositionState;
    stTarget1: DUT_PositionState;
    stTarget2: DUT_PositionState;
    stTarget3: DUT_PositionState;
    stTarget4: DUT_PositionState;
    stTarget5: DUT_PositionState;

    bStatesLock: BOOL;
END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: GET
        io: i
    &#39;}
    enumGet: ENUM_WFS_States;
END_VAR
VAR
    bWFSInit: BOOL;
END_VAR
VAR CONSTANT
    fInDelta: LREAL := 2;
    fOutDelta: LREAL := 2;
    fInVelocity: LREAL := 5;
    fOutVelocity: LREAL := 5;
    fAccel: LREAL := 200;
    fOutDecel: LREAL := 25;
END_VAR
IF NOT bWFSInit THEN
    bWFSInit := TRUE;

    stOut.sName := &#39;OUT&#39;;
    stOut.fVelocity := fOutVelocity;
    stOut.fDelta := fOutDelta;
    stOut.fAccel := fAccel;
    stOut.fDecel := fOutDecel;
    stOut.bMoveOk := TRUE;

    stTarget1.sName := &#39;TARGET1&#39;;
    stTarget1.fVelocity := fInVelocity;
    stTarget1.fDelta := fInDelta;
    stTarget1.fAccel := fAccel;
    stTarget1.fDecel := fAccel;
    stTarget1.bMoveOk := TRUE;

    stTarget2.sName := &#39;TARGET2&#39;;
    stTarget2.fVelocity := fInVelocity;
    stTarget2.fDelta := fInDelta;
    stTarget2.fAccel := fAccel;
    stTarget2.fDecel := fAccel;
    stTarget2.bMoveOk := TRUE;

    stTarget3.sName := &#39;TARGET3&#39;;
    stTarget3.fVelocity := fInVelocity;
    stTarget3.fDelta := fInDelta;
    stTarget3.fAccel := fAccel;
    stTarget3.fDecel := fAccel;
    stTarget3.bMoveOk := TRUE;

    stTarget4.sName := &#39;TARGET4&#39;;
    stTarget4.fVelocity := fInVelocity;
    stTarget4.fDelta := fInDelta;
    stTarget4.fAccel := fAccel;
    stTarget4.fDecel := fAccel;
    stTarget4.bMoveOk := TRUE;

    stTarget5.sName := &#39;TARGET5&#39;;
    stTarget5.fVelocity := fInVelocity;
    stTarget5.fDelta := fInDelta;
    stTarget5.fAccel := fAccel;
    stTarget5.fDecel := fAccel;
    stTarget5.bMoveOk := TRUE;

    arrStates[1] := stOut;
    arrStates[2] := stTarget1;
    arrStates[3] := stTarget2;
    arrStates[4] := stTarget3;
    arrStates[5] := stTarget4;
    arrStates[6] := stTarget5;
END_IF

setState := enumSet;
Exec();
enumGet := getState;
enumSet := setState;

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-xpim">
<h2>POU: FB_XPIM<a class="headerlink" href="#pou-fb-xpim" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/XPIM/FB_XPIM.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XPIM
VAR_IN_OUT
    stYStage: DUT_MotionStage;
    stZoomStage: DUT_MotionStage;
    stFocusStage: DUT_MotionStage;
    stEl6In: EL6inData22b;
    stEl6Out: EL6OutData22b;
    fbArbiter: FB_Arbiter;
    fbFFHWO: FB_HardwareFFOutput;
END_VAR
VAR_INPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: CLZ:LOCK
        io: io
        field: ZNAM Unlocked
        field: ONAM Locked
    &#39;}
    bZoomLock: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CLF:LOCK
        io: io
        field: ZNAM Unlocked
        field: ONAM Locked
    &#39;}
    bFocusLock: BOOL;

    bZoomEndFwd AT %I*: BOOL;
    bZoomEndBwd AT %I*: BOOL;
    bFocusEndFwd AT %I*: BOOL;
    bFocusEndBwd AT %I*: BOOL;

    stOut: DUT_PositionState;
    stYag: DUT_PositionState;
    stDiamond: DUT_PositionState;
    stReticle: DUT_PositionState;

    nTransitionAssertionID: UDINT;
    nUnknownAssertionID: UDINT;
END_VAR
VAR
    fbYStage: FB_MotionStage;
    fbZoom: FB_MotionStage;
    fbFocus: FB_MotionStage;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MMS:STATE
        io: io
    &#39;}
    fbStates: FB_XPIM_States;

    {attribute &#39;pytmc&#39; := &#39;
        pv: MFW
    &#39;}
    fbFilterWheel: FB_XPIM_FilterWheel;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CAM
    &#39;}
    fbOpal: FB_XPIM_Opal;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CIL
    &#39;}
    fbLED: FB_XPIM_LED;

    {attribute &#39;pytmc&#39; := &#39;
        pv: SFW
    &#39;}
    fbFlowSwitch: FB_XTES_Flowswitch;
END_VAR
fbYStage(stMotionStage:=stYStage);
stYStage.bHardwareEnable := TRUE;
stYStage.bPowerSelf := FALSE;
// No limit switch at the bottom
stYStage.bLimitBackwardEnable := TRUE;

// Extra lock on lens + lens limits are normally open
fbZoom(stMotionStage:=stZoomStage);
stZoomStage.bHardwareEnable := NOT bZoomLock;
stZoomStage.bPowerSelf := TRUE;
stZoomStage.bLimitForwardEnable := NOT bZoomEndFwd;
stZoomStage.bLimitBackwardEnable := NOT bZoomEndBwd;
stZoomStage.nHomingMode := ENUM_EpicsHomeCmd.LOW_LIMIT;
stZoomStage.fHomePosition := 0;

fbFocus(stMotionStage:=stFocusStage);
stFocusStage.bHardwareEnable := NOT bFocusLock;
stFocusStage.bPowerSelf := TRUE;
stFocusStage.bLimitForwardEnable := NOT bFocusEndFwd;
stFocusStage.bLimitBackwardEnable := NOT bFocusEndBwd;
stFocusStage.nHomingMode := ENUM_EpicsHomeCmd.LOW_LIMIT;
stFocusStage.fHomePosition := 0;

// Set special error message for lens lock
IF stZoomStage.bExecute AND bZoomLock THEN
    IF NOT stZoomStage.bError THEN
        stZoomStage.bError := TRUE;
    END_IF
    stZoomStage.sCustomErrorMessage := &#39;Zoom lens is locked!&#39;;
END_IF
IF stFocusStage.bExecute AND bFocusLock THEN
    IF NOT stFocusStage.bError THEN
        stFocusStage.bError := TRUE;
    END_IF
    stFocusStage.sCustomErrorMessage := &#39;Focus lens is locked!&#39;;
END_IF

fbStates(
    fbArbiter:=fbArbiter,
    fbFFHWO:=fbFFHWO,
    nTransitionAssertionID:=nTransitionAssertionID,
    nUnknownAssertionID:=nUnknownAssertionID,
    stMotionStage:=stYStage,
    bEnable:=TRUE,
    stOut:=stOut,
    stYag:=stYag,
    stDiamond:=stDiamond,
    stReticle:=stReticle);

fbFilterWheel(
    bExecute:=TRUE,
    stIn_El6:=stEl6In,
    stOut_El6:=stEl6Out);

fbOpal();
fbLED(enumXPIM:=fbStates.enumGet);
fbFlowSwitch();

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-xpim-filterwheel">
<h2>POU: FB_XPIM_FilterWheel<a class="headerlink" href="#pou-fb-xpim-filterwheel" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/XPIM/FB_XPIM_FilterWheel.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XPIM_FilterWheel
VAR_INPUT
    bExecute: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: ERR:RESET
        io: output
    &#39;}
    bResetError: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: SET
        io: io
    &#39;}
    nSetPos: ENUM_XPIM_Filters;
END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: GET
        io: i
    &#39;}
    nGetPos: ENUM_XPIM_Filters;
    bBusy: BOOL;
    bError: BOOL;
    sError: STRING;
    {attribute &#39;pytmc&#39; := &#39;
        pv: ERR:MSG
        io: input
    &#39;}
    sLastError: STRING;
    sErrorTS: STRING;
END_VAR
VAR_IN_OUT
    stIn_EL6: EL6inData22B;
    stOut_EL6: EL6outData22B;
END_VAR
VAR
    {attribute &#39;pytmc&#39; := &#39;
        pv: RAW
    &#39;}
    fbCom: FB_EL6_COM;

    nStep: USINT;
    sLastTestCmd: STRING;
    bIsTest: BOOL;
    fbGetTime: NT_GetTime;
    bStopOnErr: BOOL;
END_VAR
fbCom.sSendSuffix := &#39;$R&#39;;
fbCom.sRecvSuffix := &#39;$R&#39;;

IF bExecute AND nStep = 0 THEN
    IF bResetError OR NOT bError THEN
        nStep := 10;
    END_IF
ELSIF NOT bExecute THEN
    nStep := 0;
END_IF
CASE nStep OF
    0:
        ; // idle
    10:
        // Get position
        bIsTest := FALSE;
        fbCom(sCmd:=&#39;pos?&#39;,
            bSend:=TRUE,
            stIn_EL6:=stIn_EL6,
            stOut_EL6:=stOut_EL6);
        nStep := nStep + 10;
    20:
        // Wait for response and set variables
        fbCom(stIn_EL6:=stIn_EL6,
            stOut_EL6:=stOut_EL6);
        IF fbCom.bDone THEN
            bError := FALSE;
            sError := &#39;&#39;;
            nGetPos := STRING_TO_USINT(fbCom.sResponse);
            nSetPos := nGetPos;
            nStep := nStep + 10;
            IF nGetPos = 0 THEN
                sError := &#39;Filter wheel in invalid state&#39;;
                bStopOnErr := TRUE;
                nStep := 50;
            END_IF
        END_IF
    30:
        // Wait for a move request
        IF nSetPos &lt;&gt; nGetPos THEN
            fbCom(sCmd:=CONCAT(&#39;pos=&#39;, INT_TO_STRING(nSetPos)),
                bSend:=TRUE,
                stIn_EL6:=stIn_EL6,
                stOut_EL6:=stOut_EL6);
            nStep := nStep + 10;
            bBusy := TRUE;
        END_IF
    40:
        fbCom(stIn_EL6:=stIn_EL6,
            stOut_EL6:=stOut_EL6);
        // Wait for move to be done
        IF fbCom.bDone THEN
            bBusy := FALSE;
            nStep := 10;
            // Handle setpoint error
            IF fbCom.sResponse = &#39;Command error CMD_ARG_INVALID$N$R&#39; THEN
                sError := &#39;Invalid set position&#39;;
                nStep := 50;
            END_IF
        END_IF
    50:
        // Set sError and then jump here for standard handling
        sLastError := sError;
        bError := TRUE;
        fbGetTime(NETID:=&#39;&#39;,
            START:=TRUE);
        nStep := nStep + 10;
    60:
        // Error handling continued
        fbGetTime();
        IF NOT fbGetTime.BUSY THEN
            sErrorTS := SYSTEMTIME_TO_STRING(fbGetTime.TIMESTR);
            fbGetTime.START := FALSE;
            // set bStopOnErr to TRUE if it was a major error
            IF bStopOnErr THEN
                nStep := 0;
            ELSE
                nStep := 10;
            END_IF
            bStopOnErr := FALSE;
        END_IF
END_CASE
// Check for inner comms errors, report to EPICS same way
IF NOT bError AND
    (fbCom.eRecvErrorID &lt;&gt; COMERROR_NOERROR
    OR fbCom.eSendErrorID &lt;&gt; COMERROR_NOERROR
    OR fbCom.eRecvErrorID &lt;&gt; COMERROR_NOERROR) THEN
    sError := &#39;Serial Communication Error&#39;;
    bStopOnErr := TRUE;
    nStep := 50;
END_IF

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-xpim-led">
<h2>POU: FB_XPIM_LED<a class="headerlink" href="#pou-fb-xpim-led" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/XPIM/FB_XPIM_LED.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XPIM_LED
VAR_INPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: PWR
        io: io
        field: ZNAM OFF
        field: ONAM ON
    &#39;}
    bLEDPower AT %Q*: BOOL;

    {attribute &#39;pytmc&#39; := &#39;
        pv: AUTO
        io: io
    &#39;}
    bLEDAuto: BOOL := TRUE;

    {attribute &#39;pytmc&#39; := &#39;
        pv: CLK:TIMEOUT
        io: io
        field: EGU min
    &#39;}
    fLEDTimeOut: LREAL := 10;

    enumXPIM: ENUM_XPIM_States;
END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: CLK:REMAINING
        io: io
        field: EGU min
    &#39;}
    fLEDRemaining: LREAL;
END_VAR
VAR
    tonLED: TON;
    enumLastCycle: ENUM_XPIM_States := ENUM_XPIM_States.Unknown;
END_VAR
// If configured, change the LED level automatically
// LED is always (and only) useful at Reticle state
IF bLEDAuto AND enumXPIM &lt;&gt; enumLastCycle THEN
    // Turn on the LED when we get to the Reticle
    IF enumXPIM = ENUM_XPIM_States.Reticle THEN
        bLEDPower := TRUE;
    // Turn off the LED when we stop at any other state
    ELSIF enumXPIM &lt;&gt; ENUM_XPIM_States.Unknown THEN
        bLEDPower := FALSE;
    END_IF
END_IF
enumLastCycle := enumXPIM;

// If configured, start a shutdown timer when LED goes high
IF fLEDTimeOut &lt;&gt; 0 THEN;
    tonLED(IN:=bLEDPower,
           PT:=LREAL_TO_TIME(fLEDTimeOut * 60 * 1000));
    fLEDRemaining := fLEDTimeOut - TIME_TO_LREAL(tonLED.ET) / 60 / 1000;

    IF tonLED.Q THEN
        bLEDPower := FALSE;
    END_IF
END_IF

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-xpim-opal">
<h2>POU: FB_XPIM_Opal<a class="headerlink" href="#pou-fb-xpim-opal" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/XPIM/FB_XPIM_Opal.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XPIM_Opal
VAR_INPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: PWR
        io: io
        field: ZNAM OFF
        field: ONAM ON
    &#39;}
    bOpalPower AT %Q*: BOOL;
END_VAR
VAR
    bOpalInit: BOOL := FALSE;
END_VAR
// Turn the Opal on by default
IF NOT bOpalInit THEN
    bOpalPower := TRUE;
    bOpalInit := TRUE;
END_IF

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-xpim-states">
<h2>POU: FB_XPIM_States<a class="headerlink" href="#pou-fb-xpim-states" title="Permalink to this headline">¶</a></h2>
<p>File: Library/Devices/XPIM/FB_XPIM_States.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XPIM_States EXTENDS FB_PositionStateBase_WithPMPS
VAR_INPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: SET
        io: io
    &#39;}
    enumSet: ENUM_XPIM_states;

    stOut: DUT_PositionState;
    stYag: DUT_PositionState;
    stDiamond: DUT_PositionState;
    stReticle: DUT_PositionState;

    bStatesLock: BOOL;
END_VAR
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: GET
        io: i
    &#39;}
    enumGet: ENUM_XPIM_States;
END_VAR
VAR
    bXPIMInit: BOOL;
END_VAR
VAR CONSTANT
    fInDelta: LREAL := 2;
    fOutDelta: LREAL := 2;
    fInVelocity: LREAL := 5;
    fOutVelocity: LREAL := 5;
    fAccel: LREAL := 200;
    fOutDecel: LREAL := 25;
END_VAR
IF NOT bXPIMInit THEN
    bXPIMInit := TRUE;

    stOut.sName := &#39;OUT&#39;;
    stOut.fVelocity := fOutVelocity;
    stOut.fDelta := fOutDelta;
    stOut.fAccel := fAccel;
    stOut.fDecel := fOutDecel;
    stOut.bMoveOk := TRUE;

    stYag.sName := &#39;YAG&#39;;
    stYag.fVelocity := fInVelocity;
    stYag.fDelta := fInDelta;
    stYag.fAccel := fAccel;
    stYag.fDecel := fAccel;
    stYag.bMoveOk := TRUE;

    stDiamond.sName := &#39;DIAMOND&#39;;
    stDiamond.fVelocity := fInVelocity;
    stDiamond.fDelta := fInDelta;
    stDiamond.fAccel := fAccel;
    stDiamond.fDecel := fAccel;
    stDiamond.bMoveOk := TRUE;

    stReticle.sName := &#39;RETICLE&#39;;
    stReticle.fVelocity := fInVelocity;
    stReticle.fDelta := fInDelta;
    stReticle.fAccel := fAccel;
    stReticle.fDecel := fAccel;
    stReticle.bMoveOk := TRUE;

    arrStates[1] := stOut;
    arrStates[2] := stYag;
    arrStates[3] := stDiamond;
    arrStates[4] := stReticle;
END_IF

setState := enumSet;
Exec();
enumGet := getState;
enumSet := setState;

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-xtes-flowswitch">
<h2>POU: FB_XTES_Flowswitch<a class="headerlink" href="#pou-fb-xtes-flowswitch" title="Permalink to this headline">¶</a></h2>
<p>File: Library/POUs/FB_XTES_Flowswitch.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_XTES_Flowswitch
VAR_OUTPUT
    {attribute &#39;pytmc&#39; := &#39;
        pv: FLOW
        field: ZNAM LOW
        field: ONAM OK
    &#39;}
    bFlowOk AT %I*: BOOL;
END_VAR


END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="symbols">
<h2>Symbols<a class="headerlink" href="#symbols" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="boxes">
<h2>Boxes<a class="headerlink" href="#boxes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="nc-axes">
<h2>NC axes<a class="headerlink" href="#nc-axes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="pragma-lint-results">
<h2>Pragma lint results<a class="headerlink" href="#pragma-lint-results" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span><span class="p">:</span><span class="n">pytmc</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">pragmalint</span><span class="p">:</span><span class="n">Total</span> <span class="n">pragmas</span> <span class="n">found</span><span class="p">:</span> <span class="mi">94</span> <span class="n">Total</span> <span class="n">linter</span> <span class="n">errors</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">PLC</span> <span class="n">Project</span> <span class="p">(</span><span class="mi">1</span><span class="p">):</span> <span class="n">Library</span>
<span class="o">========================</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">ATM</span><span class="o">/</span><span class="n">ENUM_ATM_States</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-----------------------------------------------</span>

    <span class="o">-</span> <span class="n">ENUM_ATM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">ATM</span><span class="o">/</span><span class="n">FB_ATM</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_ATM</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">ATM</span><span class="o">/</span><span class="n">FB_ATM_States</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">---------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_ATM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">LIC</span><span class="o">/</span><span class="n">ENUM_LIC_States</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-----------------------------------------------</span>

    <span class="o">-</span> <span class="n">ENUM_LIC_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">LIC</span><span class="o">/</span><span class="n">FB_LIC</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_LIC</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">LIC</span><span class="o">/</span><span class="n">FB_LIC_States</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">---------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_LIC_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">ENUM_PPM_States</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-----------------------------------------------</span>

    <span class="o">-</span> <span class="n">ENUM_PPM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_PPM</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">5</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_Gige</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_PPM_Gige</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_PowerMeter</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-------------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_PPM_PowerMeter</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">10</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">PPM</span><span class="o">/</span><span class="n">FB_PPM_States</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">---------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_PPM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">REF</span><span class="o">/</span><span class="n">FB_REF</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_REF</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">REF</span><span class="o">/</span><span class="n">FB_REF_Laser</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_REF_Laser</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">SLITS</span><span class="o">/</span><span class="n">FB_SLITS_POWER</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">------------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_SLITS_POWER</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">28</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">WFS</span><span class="o">/</span><span class="n">ENUM_WFS_States</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-----------------------------------------------</span>

    <span class="o">-</span> <span class="n">ENUM_WFS_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">WFS</span><span class="o">/</span><span class="n">FB_WFS</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_WFS</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">3</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">WFS</span><span class="o">/</span><span class="n">FB_WFS_States</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">---------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_WFS_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">ENUM_XPIM_Filters</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------------------</span>

    <span class="o">-</span> <span class="n">ENUM_XPIM_Filters</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">ENUM_XPIM_States</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-------------------------------------------------</span>

    <span class="o">-</span> <span class="n">ENUM_XPIM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">----------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XPIM</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">7</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_FilterWheel</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XPIM_FilterWheel</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">5</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_LED</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XPIM_LED</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">4</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_Opal</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">---------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XPIM_Opal</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Devices</span><span class="o">/</span><span class="n">XPIM</span><span class="o">/</span><span class="n">FB_XPIM_States</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-----------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XPIM_States</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">POUs</span><span class="o">/</span><span class="n">FB_L2SI_Flowmeter</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_L2SI_Flowmeter</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">POUs</span><span class="o">/</span><span class="n">FB_XTES_Flowswitch</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">-------------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_XTES_Flowswitch</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Version</span><span class="o">/</span><span class="n">Global_Version</span><span class="o">.</span><span class="n">TcGVL</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">------------------------------------------</span>

    <span class="o">-</span> <span class="n">Global_Version</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">4</span> <span class="n">pragmas</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pcdshub/lcls2-cc-lib</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Library.tmc.html">Library.tmc</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PLC Project (1): Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dut-enum-atm-states">DUT: ENUM_ATM_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dut-enum-lic-states">DUT: ENUM_LIC_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dut-enum-ppm-states">DUT: ENUM_PPM_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dut-enum-wfs-states">DUT: ENUM_WFS_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dut-enum-xpim-filters">DUT: ENUM_XPIM_Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dut-enum-xpim-states">DUT: ENUM_XPIM_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-global-version">GVL: Global_Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-atm">POU: FB_ATM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-atm-states">POU: FB_ATM_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-l2si-flowmeter">POU: FB_L2SI_Flowmeter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-lic">POU: FB_LIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-lic-states">POU: FB_LIC_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-ppm">POU: FB_PPM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-ppm-gige">POU: FB_PPM_Gige</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-ppm-powermeter">POU: FB_PPM_PowerMeter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-ppm-states">POU: FB_PPM_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-ref">POU: FB_REF</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-ref-laser">POU: FB_REF_Laser</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-slits">POU: FB_SLITS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-slits-power">POU: FB_SLITS_POWER</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-wfs">POU: FB_WFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-wfs-states">POU: FB_WFS_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-xpim">POU: FB_XPIM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-xpim-filterwheel">POU: FB_XPIM_FilterWheel</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-xpim-led">POU: FB_XPIM_LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-xpim-opal">POU: FB_XPIM_Opal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-xpim-states">POU: FB_XPIM_States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-xtes-flowswitch">POU: FB_XTES_Flowswitch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#symbols">Symbols</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boxes">Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nc-axes">NC axes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#links">Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pragma-lint-results">Pragma lint results</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="Library.tmc.html" title="previous chapter">Library.tmc</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, SLAC National Accelerator Laboratory.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/lcls2-cc-lib.tsproj.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>